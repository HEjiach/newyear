<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no">
<title>2026 æ–°æ˜¥å¿«ä¹ Â· é©¬å¹´å¤§å‰</title>
<style>
*{margin:0;padding:0;box-sizing:border-box}
@import url('https://fonts.googleapis.com/css2?family=ZCOOL+XiaoWei&family=Noto+Serif+SC:wght@600;900&display=swap');
html,body{width:100%;height:100%;overflow:hidden;background:#0a0e27;font-family:'Noto Serif SC','ZCOOL XiaoWei','STKaiti','KaiTi',serif}
canvas{position:fixed;top:0;left:0;width:100%;height:100%;z-index:1}

/* ===== å°é¢å±‚ ===== */
.cover{position:fixed;top:0;left:0;width:100%;height:100%;z-index:10;display:flex;flex-direction:column;align-items:center;justify-content:center;background:radial-gradient(ellipse at 50% 80%,#1a1040 0%,#0a0e27 60%,#050714 100%);cursor:pointer;transition:opacity .8s ease}
.cover.hidden{opacity:0;pointer-events:none}
.cover-title{font-size:clamp(2rem,8vw,4rem);color:#ffd700;text-shadow:0 0 20px rgba(255,215,0,.6),0 0 60px rgba(255,100,0,.3);letter-spacing:.15em;animation:glow 2s ease-in-out infinite alternate}
.cover-year{font-size:clamp(1rem,4vw,1.8rem);color:#ff6b35;margin-top:12px;letter-spacing:.3em;opacity:.9}
.cover-horse{font-size:clamp(4rem,15vw,8rem);margin:24px 0;filter:drop-shadow(0 0 30px rgba(255,215,0,.5));animation:horseFloat 3s ease-in-out infinite}
.cover-tap{font-size:clamp(.85rem,3vw,1.1rem);color:rgba(255,255,255,.7);margin-top:30px;animation:blink 1.5s ease-in-out infinite}
@keyframes glow{from{text-shadow:0 0 20px rgba(255,215,0,.5),0 0 40px rgba(255,100,0,.2)}to{text-shadow:0 0 30px rgba(255,215,0,.9),0 0 80px rgba(255,100,0,.5),0 0 120px rgba(255,50,0,.2)}}
@keyframes horseFloat{0%,100%{transform:translateY(0)}50%{transform:translateY(-15px)}}
@keyframes blink{0%,100%{opacity:.4}50%{opacity:1}}

/* ===== åŸå¸‚å‰ªå½± ===== */
.skyline{position:fixed;bottom:0;left:0;width:100%;height:15vh;z-index:2;background:linear-gradient(transparent,rgba(10,14,39,.95))}
.skyline::before{content:'';position:absolute;bottom:0;left:0;width:200%;height:100%;background:
  url("data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 1200 120'%3E%3Cpath d='M0 120 L0 80 L30 80 L30 50 L50 50 L50 70 L70 70 L70 30 L85 30 L85 60 L100 60 L100 40 L120 40 L120 70 L140 70 L140 55 L160 55 L160 25 L175 25 L175 20 L180 20 L180 25 L195 25 L195 65 L210 65 L210 45 L230 45 L230 75 L260 75 L260 35 L275 35 L275 60 L290 60 L290 80 L310 80 L310 50 L330 50 L330 65 L350 65 L350 30 L365 30 L365 25 L370 25 L370 30 L385 30 L385 70 L400 70 L400 120Z' fill='%230d1117'/%3E%3Cpath d='M400 120 L400 70 L420 70 L420 45 L440 45 L440 60 L460 60 L460 35 L475 35 L475 55 L490 55 L490 75 L510 75 L510 40 L530 40 L530 50 L550 50 L550 20 L565 20 L565 15 L570 15 L570 20 L585 20 L585 60 L600 60 L600 120Z' fill='%230d1117'/%3E%3C/svg%3E") repeat-x bottom/600px 120px;
  animation:skylineScroll 60s linear infinite}
@keyframes skylineScroll{from{transform:translateX(0)}to{transform:translateX(-50%)}}

/* ===== ç¯ç¬¼ ===== */
.lanterns{position:fixed;top:0;left:0;width:100%;height:100%;z-index:3;pointer-events:none;opacity:0;transition:opacity 1.5s ease}
.lanterns.show{opacity:1}
.lantern{position:absolute;top:-10px;animation:lanternSway 4s ease-in-out infinite}
.lantern:nth-child(1){left:5%;animation-delay:0s}
.lantern:nth-child(2){right:5%;animation-delay:1.5s}
.lantern-body{width:clamp(30px,8vw,50px);height:clamp(40px,11vw,70px);background:radial-gradient(ellipse,#ff4444,#cc0000);border-radius:50%;box-shadow:0 0 20px rgba(255,50,0,.6),0 0 60px rgba(255,0,0,.3),inset 0 0 15px rgba(255,200,0,.3);position:relative;display:flex;align-items:center;justify-content:center}
.lantern-body::before{content:'ç¦';font-size:clamp(14px,4vw,22px);color:#ffd700;font-weight:900;text-shadow:0 0 5px rgba(255,215,0,.8)}
.lantern-body::after{content:'';position:absolute;bottom:-8px;left:50%;transform:translateX(-50%);width:8px;height:12px;background:linear-gradient(#ffd700,#ff8c00);border-radius:0 0 4px 4px}
.lantern-string{width:2px;height:clamp(20px,5vw,35px);background:#ffd700;margin:0 auto}
.lantern-top{width:clamp(18px,5vw,30px);height:6px;background:linear-gradient(#ffd700,#ff8c00);border-radius:3px;margin:0 auto}
@keyframes lanternSway{0%,100%{transform:rotate(-5deg)}50%{transform:rotate(5deg)}}

/* ===== ç¥ç¦è¯­å±‚ ===== */
.blessing{position:fixed;top:0;left:0;width:100%;height:100%;z-index:4;display:flex;flex-direction:column;align-items:center;justify-content:center;pointer-events:none;opacity:0;transition:opacity 1s ease}
.blessing.show{opacity:1}
.blessing-main{font-size:clamp(2rem,9vw,4.5rem);font-weight:900;background:linear-gradient(135deg,#ffd700,#ffaa00,#ffd700,#fff4a0,#ffd700);-webkit-background-clip:text;-webkit-text-fill-color:transparent;background-clip:text;text-shadow:none;filter:drop-shadow(0 0 15px rgba(255,215,0,.5));letter-spacing:.12em;margin-bottom:8px;transform:translateY(30px);opacity:0;animation:none}
.blessing-main.animate{animation:riseIn .8s ease forwards}
.blessing-emoji{font-size:clamp(1.5rem,6vw,3rem);margin-bottom:6px;transform:translateY(30px);opacity:0}
.blessing-emoji.animate{animation:riseIn .8s ease forwards}
.blessing-sub{font-size:clamp(1rem,4.5vw,1.8rem);color:#ffd700;letter-spacing:.25em;margin:4px 0;transform:translateY(30px);opacity:0;text-shadow:0 0 10px rgba(255,215,0,.4)}
.blessing-sub.animate{animation:riseIn .8s ease forwards}
.blessing-footer{font-size:clamp(.8rem,3vw,1.1rem);color:rgba(255,180,100,.8);margin-top:18px;line-height:1.8;text-align:center;letter-spacing:.1em;transform:translateY(30px);opacity:0}
.blessing-footer.animate{animation:riseIn .8s ease forwards}
.blessing-line{display:block}

@keyframes riseIn{from{transform:translateY(30px);opacity:0}to{transform:translateY(0);opacity:1}}

/* ===== é‡‘è‰²ç²’å­é£˜è½ ===== */
.sparkles{position:fixed;top:0;left:0;width:100%;height:100%;z-index:2;pointer-events:none;overflow:hidden;opacity:0;transition:opacity 2s ease}
.sparkles.show{opacity:1}
.sparkle{position:absolute;width:3px;height:3px;background:#ffd700;border-radius:50%;box-shadow:0 0 6px #ffd700;animation:sparkleFloat linear infinite}
@keyframes sparkleFloat{0%{transform:translateY(-10px) rotate(0deg);opacity:0}10%{opacity:1}90%{opacity:.6}100%{transform:translateY(100vh) rotate(720deg);opacity:0}}

/* ===== éŸ³ä¹æ§åˆ¶æŒ‰é’® ===== */
.music-btn{position:fixed;top:15px;right:15px;z-index:20;width:36px;height:36px;border:2px solid rgba(255,215,0,.6);border-radius:50%;background:rgba(0,0,0,.3);backdrop-filter:blur(5px);cursor:pointer;display:flex;align-items:center;justify-content:center;opacity:0;transition:opacity .5s ease}
.music-btn.show{opacity:1}
.music-btn .icon{width:14px;height:14px;border:2px solid #ffd700;border-radius:50%;position:relative;animation:musicSpin 2s linear infinite}
.music-btn .icon::after{content:'â™ª';position:absolute;top:-8px;right:-6px;font-size:10px;color:#ffd700}
.music-btn.paused .icon{animation-play-state:paused}
@keyframes musicSpin{from{transform:rotate(0)}to{transform:rotate(360deg)}}
</style>
</head>
<body>

<!-- å°é¢ -->
<div class="cover" id="cover">
  <div class="cover-year">å†œå†ä¸™åˆå¹´</div>
  <div class="cover-horse">ğŸ´</div>
  <div class="cover-title">æ–°æ˜¥å¿«ä¹</div>
  <div class="cover-tap">â€” ç‚¹å‡»å±å¹• å¼€å¯ç¥ç¦ â€”</div>
</div>

<!-- çƒŸèŠ±ç”»å¸ƒ -->
<canvas id="fireworks"></canvas>

<!-- åŸå¸‚å‰ªå½± -->
<div class="skyline"></div>

<!-- ç¯ç¬¼ -->
<div class="lanterns" id="lanterns">
  <div class="lantern">
    <div class="lantern-string"></div>
    <div class="lantern-top"></div>
    <div class="lantern-body"></div>
  </div>
  <div class="lantern">
    <div class="lantern-string"></div>
    <div class="lantern-top"></div>
    <div class="lantern-body"></div>
  </div>
</div>

<!-- é‡‘è‰²ç²’å­ -->
<div class="sparkles" id="sparkles"></div>

<!-- ç¥ç¦è¯­ -->
<div class="blessing" id="blessing">
  <div class="blessing-emoji" data-delay="200">ğŸ´</div>
  <div class="blessing-main" data-delay="600">æ–°æ˜¥å¿«ä¹</div>
  <div class="blessing-sub" data-delay="1200">é©¬åˆ°æˆåŠŸ Â· ä¸‡äº‹å¦‚æ„</div>
  <div class="blessing-sub" data-delay="1800">é¾™é©¬ç²¾ç¥ Â· å‰ç¨‹ä¼¼é”¦</div>
  <div class="blessing-sub" data-delay="2400">ä¸€é©¬å½“å…ˆ Â· æ­¥æ­¥é«˜å‡</div>
  <div class="blessing-sub" data-delay="3000">ä¸‡é©¬å¥”è…¾ Â· é˜–å®¶å¹¸ç¦</div>
  <div class="blessing-footer" data-delay="3800">
    <span class="blessing-line">æ–°çš„ä¸€å¹´</span>
    <span class="blessing-line">æ„¿ä½ ç­–é©¬æ‰¬é­ é©°éª‹äººç”Ÿ ğŸŠ</span>
  </div>
</div>

<!-- éŸ³ä¹æŒ‰é’® -->
<div class="music-btn" id="musicBtn">
  <div class="icon"></div>
</div>

<script>
// ========== çƒŸèŠ±ç²’å­ç³»ç»Ÿ ==========
const canvas = document.getElementById('fireworks');
const ctx = canvas.getContext('2d');
let W, H;
let fireworks = [];
let particles = [];
let running = false;

function resize() {
  W = canvas.width = window.innerWidth;
  H = canvas.height = window.innerHeight;
}
window.addEventListener('resize', resize);
resize();

// è°ƒè‰²æ¿
const palettes = [
  ['#ff4444','#ff6b6b','#ff8e8e','#ffb3b3'],    // çº¢
  ['#ffd700','#ffea00','#fff176','#fff9c4'],      // é‡‘
  ['#ff6b35','#ff8a50','#ffab76','#ffcc80'],      // æ©™
  ['#4fc3f7','#81d4fa','#b3e5fc','#e1f5fe'],      // è“
  ['#ce93d8','#e1bee7','#f3e5f5','#ba68c8'],      // ç´«
  ['#69f0ae','#a5d6a7','#c8e6c9','#b9f6ca'],      // ç»¿
  ['#ff4081','#ff80ab','#ff80ab','#fce4ec'],      // ç²‰
];

class Firework {
  constructor(x, targetY) {
    this.x = x || W * (.15 + Math.random() * .7);
    this.y = H;
    this.targetY = targetY || H * (.1 + Math.random() * .35);
    this.speed = 3 + Math.random() * 3;
    this.trail = [];
    this.palette = palettes[Math.floor(Math.random() * palettes.length)];
    this.brightness = this.palette[0];
    this.done = false;
  }
  update() {
    this.trail.push({ x: this.x, y: this.y });
    if (this.trail.length > 8) this.trail.shift();
    this.y -= this.speed;
    this.speed *= 0.985;
    if (this.y <= this.targetY || this.speed < 1) {
      this.explode();
      this.done = true;
    }
  }
  explode() {
    const count = 80 + Math.floor(Math.random() * 60);
    const type = Math.random();
    for (let i = 0; i < count; i++) {
      let angle, speed;
      if (type < 0.3) {
        // åœ†å½¢çˆ†ç‚¸
        angle = (Math.PI * 2 * i) / count;
        speed = 2 + Math.random() * 4;
      } else if (type < 0.6) {
        // éšæœºæ•£å°„
        angle = Math.random() * Math.PI * 2;
        speed = 1 + Math.random() * 5;
      } else {
        // åŒç¯
        angle = (Math.PI * 2 * i) / count;
        speed = (i % 2 === 0) ? 2 + Math.random() * 2 : 4 + Math.random() * 2;
      }
      particles.push(new Particle(
        this.x, this.y, angle, speed,
        this.palette[Math.floor(Math.random() * this.palette.length)]
      ));
    }
    // ä¸­å¿ƒé—ªå…‰
    for (let i = 0; i < 8; i++) {
      const a = Math.random() * Math.PI * 2;
      particles.push(new Particle(this.x, this.y, a, .5 + Math.random(), '#ffffff'));
    }
  }
  draw() {
    // å°¾è¿¹
    for (let i = 0; i < this.trail.length; i++) {
      const t = this.trail[i];
      const alpha = (i / this.trail.length) * 0.6;
      ctx.beginPath();
      ctx.arc(t.x, t.y, 1.5, 0, Math.PI * 2);
      ctx.fillStyle = `rgba(255,215,0,${alpha})`;
      ctx.fill();
    }
    // å¼¹å¤´
    ctx.beginPath();
    ctx.arc(this.x, this.y, 2.5, 0, Math.PI * 2);
    ctx.fillStyle = this.brightness;
    ctx.shadowColor = this.brightness;
    ctx.shadowBlur = 15;
    ctx.fill();
    ctx.shadowBlur = 0;
  }
}

class Particle {
  constructor(x, y, angle, speed, color) {
    this.x = x;
    this.y = y;
    this.vx = Math.cos(angle) * speed;
    this.vy = Math.sin(angle) * speed;
    this.color = color;
    this.alpha = 1;
    this.decay = 0.008 + Math.random() * 0.012;
    this.gravity = 0.03;
    this.friction = 0.98;
    this.size = 1.5 + Math.random() * 1.5;
    this.done = false;
  }
  update() {
    this.vx *= this.friction;
    this.vy *= this.friction;
    this.vy += this.gravity;
    this.x += this.vx;
    this.y += this.vy;
    this.alpha -= this.decay;
    if (this.alpha <= 0) { this.alpha = 0; this.done = true; }
  }
  draw() {
    ctx.beginPath();
    ctx.arc(this.x, this.y, this.size, 0, Math.PI * 2);
    ctx.fillStyle = this.color;
    ctx.globalAlpha = this.alpha;
    ctx.shadowColor = this.color;
    ctx.shadowBlur = 8;
    ctx.fill();
    ctx.shadowBlur = 0;
    ctx.globalAlpha = 1;
  }
}

let autoTimer = 0;
const autoInterval = () => 400 + Math.random() * 500;
let nextAuto = autoInterval();

function loop(ts) {
  if (!running) return;
  // åŠé€æ˜è¦†ç›– â†’ æ‹–å°¾æ•ˆæœ
  ctx.fillStyle = 'rgba(10,14,39,0.18)';
  ctx.fillRect(0, 0, W, H);

  // è‡ªåŠ¨å‘å°„
  autoTimer += 16;
  if (autoTimer > nextAuto) {
    fireworks.push(new Firework());
    autoTimer = 0;
    nextAuto = autoInterval();
  }

  // æ›´æ–°å’Œç»˜åˆ¶
  fireworks.forEach(f => { f.update(); f.draw(); });
  fireworks = fireworks.filter(f => !f.done);
  particles.forEach(p => { p.update(); p.draw(); });
  particles = particles.filter(p => !p.done);

  requestAnimationFrame(loop);
}

// ç”¨æˆ·ç‚¹å‡»æ”¾çƒŸèŠ±
function userFirework(x, y) {
  if (!running) return;
  fireworks.push(new Firework(x, H * (.1 + Math.random() * .3)));
}

// ========== Web Audio èƒŒæ™¯éŸ³ä¹ ==========
let audioCtx = null;
let musicPlaying = false;
let musicInterval = null;

function createMusic() {
  audioCtx = new (window.AudioContext || window.webkitAudioContext)();

  // äº”å£°éŸ³é˜¶ï¼ˆC D E G Aï¼‰çš„é¢‘ç‡ + é«˜å…«åº¦
  const notes = [
    261.63, 293.66, 329.63, 392.00, 440.00,  // C4 D4 E4 G4 A4
    523.25, 587.33, 659.25, 783.99, 880.00    // C5 D5 E5 G5 A5
  ];

  // æ–°æ˜¥æ—‹å¾‹åºåˆ—ï¼ˆéŸ³ç¬¦ç´¢å¼• + æ—¶å€¼ï¼‰
  const melody = [
    [4,0.3],[5,0.3],[7,0.6],[5,0.3],[4,0.3],
    [2,0.6],[4,0.3],[2,0.3],[0,0.6],[null,0.3],
    [0,0.3],[2,0.3],[4,0.6],[5,0.3],[4,0.3],
    [2,0.3],[0,0.3],[2,0.9],[null,0.3],
    [4,0.3],[5,0.3],[7,0.6],[9,0.3],[7,0.3],
    [5,0.6],[4,0.3],[2,0.3],[4,0.9],[null,0.3],
    [7,0.3],[5,0.3],[4,0.6],[2,0.3],[4,0.3],
    [2,0.3],[0,0.3],[0,0.9],[null,0.6],
  ];

  let noteIndex = 0;
  let startTime = audioCtx.currentTime + 0.1;

  function scheduleMelody() {
    const lookAhead = 2; // æå‰è°ƒåº¦ 2 ç§’
    while (startTime < audioCtx.currentTime + lookAhead) {
      const [ni, dur] = melody[noteIndex % melody.length];
      if (ni !== null) {
        playNote(notes[ni], startTime, dur * 0.85, dur);
      }
      startTime += dur * 0.45; // èŠ‚å¥ç´§å‡‘ä¸€ç‚¹
      noteIndex++;
    }
  }

  function playNote(freq, time, noteDur, _fullDur) {
    // ä¸»æ—‹å¾‹
    const osc = audioCtx.createOscillator();
    const gain = audioCtx.createGain();
    osc.type = 'sine';
    osc.frequency.setValueAtTime(freq, time);
    gain.gain.setValueAtTime(0, time);
    gain.gain.linearRampToValueAtTime(0.1, time + 0.04);
    gain.gain.exponentialRampToValueAtTime(0.001, time + noteDur);
    osc.connect(gain);
    gain.connect(audioCtx.destination);
    osc.start(time);
    osc.stop(time + noteDur + 0.05);

    // æ³›éŸ³
    const osc2 = audioCtx.createOscillator();
    const gain2 = audioCtx.createGain();
    osc2.type = 'triangle';
    osc2.frequency.setValueAtTime(freq * 2, time);
    gain2.gain.setValueAtTime(0, time);
    gain2.gain.linearRampToValueAtTime(0.03, time + 0.04);
    gain2.gain.exponentialRampToValueAtTime(0.001, time + noteDur * 0.7);
    osc2.connect(gain2);
    gain2.connect(audioCtx.destination);
    osc2.start(time);
    osc2.stop(time + noteDur + 0.05);
  }

  musicInterval = setInterval(scheduleMelody, 500);
  scheduleMelody();
  musicPlaying = true;
}

function toggleMusic() {
  if (!audioCtx) return;
  if (musicPlaying) {
    audioCtx.suspend();
    musicPlaying = false;
    document.getElementById('musicBtn').classList.add('paused');
  } else {
    audioCtx.resume();
    musicPlaying = true;
    document.getElementById('musicBtn').classList.remove('paused');
  }
}

// ========== é‡‘è‰²ç²’å­ç”Ÿæˆ ==========
function createSparkles() {
  const container = document.getElementById('sparkles');
  for (let i = 0; i < 30; i++) {
    const s = document.createElement('div');
    s.className = 'sparkle';
    s.style.left = Math.random() * 100 + '%';
    s.style.animationDuration = (4 + Math.random() * 6) + 's';
    s.style.animationDelay = (Math.random() * 8) + 's';
    s.style.width = (1 + Math.random() * 3) + 'px';
    s.style.height = s.style.width;
    container.appendChild(s);
  }
}

// ========== ç¥ç¦è¯­é€è¡ŒåŠ¨ç”» ==========
function showBlessings() {
  const el = document.getElementById('blessing');
  el.classList.add('show');
  const items = el.querySelectorAll('[data-delay]');
  items.forEach(item => {
    const delay = parseInt(item.dataset.delay);
    setTimeout(() => item.classList.add('animate'), delay);
  });
}

// ========== å¯åŠ¨æµç¨‹ ==========
function start() {
  const cover = document.getElementById('cover');
  cover.classList.add('hidden');

  // å¯åŠ¨çƒŸèŠ±
  running = true;
  // æ¸…é™¤ç”»å¸ƒ
  ctx.fillStyle = '#0a0e27';
  ctx.fillRect(0, 0, W, H);
  // åˆå§‹å¯†é›†çƒŸèŠ±
  for (let i = 0; i < 5; i++) {
    setTimeout(() => fireworks.push(new Firework()), i * 200);
  }
  requestAnimationFrame(loop);

  // æ˜¾ç¤ºè£…é¥°å…ƒç´ 
  setTimeout(() => {
    document.getElementById('lanterns').classList.add('show');
    document.getElementById('sparkles').classList.add('show');
    document.getElementById('musicBtn').classList.add('show');
  }, 500);

  // æ˜¾ç¤ºç¥ç¦è¯­
  setTimeout(showBlessings, 1200);

  // èƒŒæ™¯éŸ³ä¹
  try { createMusic(); } catch(e) {}

  // å…è®¸ç‚¹å‡»åŠ çƒŸèŠ±
  document.addEventListener('click', e => {
    if (e.target.closest('#musicBtn')) return;
    userFirework(e.clientX, e.clientY);
  });
  document.addEventListener('touchstart', e => {
    if (e.target.closest('#musicBtn')) return;
    const t = e.touches[0];
    userFirework(t.clientX, t.clientY);
  }, { passive: true });
}

// äº‹ä»¶ç»‘å®š
document.getElementById('cover').addEventListener('click', start);
document.getElementById('cover').addEventListener('touchstart', e => {
  e.preventDefault();
  start();
}, { once: true });

document.getElementById('musicBtn').addEventListener('click', e => {
  e.stopPropagation();
  toggleMusic();
});

// åˆå§‹åŒ–é‡‘è‰²ç²’å­
createSparkles();
</script>
</body>
</html>
